# 프로세스 동기화, 임계구역 문제

## contents

-   [Thread(쓰레드)](#Thread)

# Thread

쓰레드란, 프로그램 내부의 흐름을 말한다. 보통 1개의 프로그램에는 1개의 흐름이 존재하지만, 여러개의 흐름이 존재하는 경우 multiThread(다중 쓰레드)라고 한다.

이렇게 멀티쓰레드를 가질 수 있는 이유는, 쓰레드가 매우 빠른 간격으로 switcing 되고있기 떄문이다. 그래서 실제로 cpu는 하나이기 때문에 한개의 쓰레드만 실행될 수 있지만, 여러개의 쓰레드가 동시에 실행되는 것 처럼 느낄 수 있는 것이다.

`concurrent`[실제로는하나지만빠른스위칭때문에동시처럼보임] vs `simultaneous`[실제로2개가실행.cpu가 한개일경우 이런일은 있을 수 없음 ㅎ]의 용어도 알아두자.

예시를 보면, 사실 대부분의 프로그램은 다중 쓰레드 프로그램이다.

-   web browser - 화면 출력 Thread + 데이터 읽어오는 Thread
-   word processor - 화면 출력 Thread + 키보드 입력받는 Thread + 철자/문법/오류 확인 Thread

### Thread vs Process

사실 P1의 쓰레드가 실행되고, P1의 다른 쓰레드가 실행되고, P2의 다른쓰레드 실행.. 이렇게 사실 현대의 운영체제는 쓰레드 스위칭을 위주로 work 처리가 일어난다. 다시말해, **context switching단위가 process 가 아니라 thread 라는 것**

mem의 하나의 프로세스 내에서 많은 쓰레드는 code, data를 공유한다. 하지만 stack은 공유하지 않는다.(단일 쓰레드가 끝나면 또다른프로세스의 또다른 쓰레드를 처리하러 ㅌㅌ해야하기때문)

쓰레드의 구조를 정리해보자.

-   프로세스의 메모리 공간 공유 : code, data
-   프로세스의 자원 공유 : file, i/o
-   비공유 : 개별적인 PC(program counter), SP, registers, stack
